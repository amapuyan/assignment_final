# Use Case: Mental Health Monitoring via Mobile Check-In App
## Problem Statement: 
Many patients living with depression, anxiety, or other mood disorders only interact with their therapist or psychiatrist every few weeks or months. This project proposes a cloud-based mental health monitoring system that combines daily mobile check-ins and sleep data from wearables to provide clinicians with a continuous view of how their patients are doing between visits. The goal is not to replace therapy, but to give therapists better visibility into trends, so they can identify high-risk patients earlier, prioritize outreach, and adjust treatment plans when needed.
## Users:
- **Patients:**
Adults or adolescents being treated for depression, anxiety, or related mood disorders. They use a mobile app to complete a short daily check-in and optionally connect their wearable device.
- **Clinicians (therapists / psychiatrists)**
They review summary dashboards showing each patient's recent mood and sleep trends, with flags indicating patients who may be deteriorating or at higher risk.
- **Clinic Care Coordinators / Case Managers**
They monitor a panel-wide view and can help schedule earlier appointments or outreach for flagged patients.

## Data Sources:
The system uses several types of data. In this project, all data would be synthetic or de-identified, but the structure reflects realistic mental health monitoring. 
1. **Daily Mood Check-In (from Mobile App) - JSON or form posts**
- Collected via: mobile app or web front-end calling a Flask API.
- Example fields:
    - 'patient_id'
    - 'timestamp'
    - 'mood_score' (ex. 1-10 scale)
    - 'anxiety_score' (ex. 1-10 scale)
    - 'energy_level' (ex. low/medium/high or 1-5)
    - 'stress_level'
    - An optional text note ('journal_text')
2. **Sleep Data from Wearable Device API**
   - Synced from: wearable vendor API (ex., simulated Fitbit / Apple Watch data) once per day.
   - Example fields:
     - `patient_id`
     - `date`
     - `total_sleep_hours`
     - `sleep_efficiency` (percentage of time in bed actually asleep)
     - Optional: `time_to_fall_asleep`, `wake_episodes`
3. **Patient Registry / Panel (Stored in Database)**
   - Used for: linking mood/sleep records to the right clinician.
   - Example fields:
     - `patient_id`
     - `display_name` (or pseudonym)
     - `diagnosis_category` (ex., depression, anxiety)
     - `clinician_id`
     - `consent_flag` (whether they opted into remote monitoring)
4. **Derived Summary and Risk Flags (Stored in Database)**
   - Generated by: an analytics/aggregation step in the cloud.
   - Example fields:
     - `patient_id`
     - `date`
     - `avg_mood_last_7_days`
     - `change_in_mood_vs_baseline`
     - `avg_sleep_hours_last_7_days`
     - `sleep_deficit_flag` (ex., < 6 hours for several nights)
     - `risk_flag` (ex., green / yellow / red)
     - `risk_reason` (ex., "mood dropping", "poor sleep", or both)
## Workflow:
Below is a step-by-step description of how data flows through the proposed system.
1. **Daily Patient Check-In**
   - Each day, the patient opens the mobile app and completes a brief mood check-in (mood, anxiety, energy, stress, optional notes).
   - The app sends this data as a JSON payload to a **Flask backend API** hosted in the cloud (ex., on Azure App Service or Azure Container Apps).
2. **Sleep Data Sync**
   - Once per day (ex., early morning), the backend or a scheduled process calls the wearable vendor’s API (simulated for this project) to fetch each patient’s sleep data for the previous night.
   - Raw sleep JSON files or CSV exports are written to **Azure Blob Storage** for long-term storage.
3. **Raw Data Storage**
   - Incoming mood check-in events are also stored in **Azure Blob Storage** (or directly inserted into a database) as raw records, organized by date and patient ID. This acts as an auditable “data lake” layer.
4. **Aggregation and Risk Scoring**
   - A **timer-triggered Azure Function** (ex., running every hour or once per day) reads new mood and sleep data from Blob Storage and/or directly from tables.
   - The Function cleans the data, calculates rolling 7-day averages and changes from each patient’s baseline, and applies simple rules or a lightweight model to determine:
     - Whether mood is trending downward.
     - Whether the patient is consistently sleeping poorly.
     - Whether both mood and sleep are concerning at the same time.
   - The Function writes the results to an **Azure database** (ex., Azure SQL or Azure Database for MySQL) in a summary table with a `risk_flag` and `risk_reason`.
5. **Clinician Dashboard**
   - A separate route in the **Flask web app** serves a secure dashboard for therapists.
   - The dashboard queries the summary table in the database and displays:
     - A list of patients with their current status (ex., green/yellow/red).
     - Simple charts showing recent mood and sleep trends for each patient.
   - Clinicians can click into a specific patient to see trend graphs over the last 7–30 days and review any notes.
6. **Optional AI/Analytics Component**
   - An **Azure ML or notebook environment** can be connected to the same database to:
     - Explore historical patterns.
     - Experiment with more advanced risk-scoring models (ex., logistic regression or simple classification).
   - Updated `risk_score` outputs can be written back into the summary table and surfaced in the clinician dashboard.

